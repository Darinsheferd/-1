# Портал ООО «Энерготехмаш»

Учебный/дипломный проект: корпоративный web-портал для промышленной компании, занимающейся производством и поставкой алюминиевых профилей и профильных систем.

Цель проекта — спроектировать и реализовать полноценный веб-сервис, который:
- улучшает пользовательский опыт для клиентов (каталог, документация, формы запросов);
- повышает конверсию в заявки за счёт понятных сценариев и форм «Запрос КП»;
- даёт внутренним пользователям (менеджерам) удобную админ-панель и отчёты.

---

## Основной функционал

### Публичная часть (клиентский интерфейс)

- **Главная страница**
  - Краткое описание компании и направлений деятельности.
  - CTA-кнопки «Открыть каталог» и «Запросить коммерческое предложение».
  - Блок с описанием преимуществ и сценариев для клиентов.

- **Каталог продукции**
  - Список продуктов с карточками.
  - Поиск по полю «Артикул или название системы».
  - Переход на детальную карточку продукта.

- **Карточка продукта**
  - Название, код (артикул), категория.
  - Описание продукции.
  - Блок «Документация» с привязанными PDF-файлами (каталоги, инструкции и т.п.).

- **Раздел «Документация»**
  - Список всех документов (каталоги, ТИ, инструкции).
  - Переход по ссылке на PDF/файл.

- **Форма «Запрос коммерческого предложения»**
  - Поля: контактное лицо, компания, email, телефон, комментарий.
  - Отправка заявки на backend, сохранение в БД.
  - Сообщения об успехе/ошибке.

### Админ-панель

Доступна авторизованным пользователям с ролью `ADMIN`.

- **Авторизация**
  - Вход в виде современного модального окна («Войти» в шапке).
  - JWT-авторизация, хранение токена в `localStorage`.
  - Роли пользователей: `ADMIN`, `MANAGER`, `VIEWER`.

- **Dashboard**
  - Количество пользователей системы.
  - Общее число заявок.
  - Разбивка заявок по статусам (NEW, IN_PROGRESS, WON, LOST).
  - Топ-продукты по количеству запросов.
  - Карточки-метрики и аккуратный интерфейс для защиты/демо.

*(При необходимости можно расширить админку страницами для управления товарами, документами и заявками.)*

---

## Стек технологий

### Frontend

- **React**
- **React Router** — маршрутизация (главная, каталог, продукт, документация, запрос КП, админка, логин).
- **Redux Toolkit** — глобальное состояние:
  - `authSlice` — авторизация, пользователь, токен.
  - `productSlice` — список и детали продуктов.
  - `enquirySlice` — создание и просмотр заявок.
  - `reportSlice` — данные отчётов для дашборда.
- **Axios** — HTTP-клиент, настроен общий `axiosClient` с baseURL и автоподстановкой токена.
- **Tailwind CSS** — современный адаптивный дизайн:
  - тёмная тема;
  - компоненты-утилиты (`btn-primary`, `card`, `input` и т.п.);
  - акцентный бренд-цвет.

### Backend

- **Node.js + Express**
  - REST API `/api/...`
  - Маршруты: `auth`, `products`, `enquiries`, `news`, `documents`, `reports`.

- **Авторизация**
  - `jsonwebtoken` — создание и проверка JWT.
  - `passport` + `passport-jwt` — middleware для защищённых роутов.
  - Ролевая модель (ADMIN / MANAGER / VIEWER).

- **База данных**
  - **PostgreSQL**.
  - Доступ к БД:
    - `@prisma/client` + `prisma` — ORM и миграции.
    - `pg` — для выборки отчётных запросов (пример топ-продуктов).

- **Прочее**
  - `cors` — кросс-доменные запросы.
  - `dotenv` — работа с конфигом/секретами.
  - `morgan` — логирование запросов.
  - `nodemon` — удобный dev-режим.

---

## Структура БД (10 таблиц)

Реализовано минимум 10 таблиц в PostgreSQL через Prisma:

- `User` — пользователи системы (email, пароль, имя, роль).
- `ProductCategory` — категории продукции.
- `Product` — продукты/системы (связаны с категориями).
- `Industry` — отрасли/области применения.
- `ProductIndustry` — связь многие-ко-многим между продуктами и индустриями.
- `Enquiry` — заявки «Запрос КП».
- `EnquiryItem` — строки заявок (связь заявки и продуктов).
- `News` — новости/публикации компании.
- `Document` — документация (каталоги, инструкции, сертификаты).
- `ReportRecord` — универсальная таблица для агрегированных метрик (для отчётов).

---

## Архитектура проекта

```text
energotehmash-portal/
  Server/                  # backend (Node.js + Express + Prisma)
    src/
      app.js               # конфигурация приложения Express
      server.js            # запуск сервера
      db/
        prismaClient.js    # PrismaClient
        pgPool.js          # пул pg для raw-запросов
      config/
        passport.js        # JWT стратегия
      middleware/
        authMiddleware.js  # защита роутов, проверка ролей
        errorHandler.js    # централизованный обработчик ошибок
      controllers/
        authController.js
        productController.js
        enquiryController.js
        newsController.js
        documentController.js
        reportController.js
      routes/
        authRoutes.js
        productRoutes.js
        enquiryRoutes.js
        newsRoutes.js
        documentRoutes.js
        reportRoutes.js
    prisma/
      schema.prisma        # схема БД
  Client/                  # frontend (React + Vite)
    src/
      api/axiosClient.js
      store/index.js
      slices/
        authSlice.js
        productSlice.js
        enquirySlice.js
        reportSlice.js
      components/
        layout/
          Header.jsx
          Footer.jsx
          Layout.jsx
        admin/
          AdminRoute.jsx
        pages/
          HomePage.jsx
          CatalogPage.jsx
          ProductDetailPage.jsx
          DocsPage.jsx
          ContactPage.jsx
          LoginPage.jsx
          admin/
            AdminDashboard.jsx







---

## 2. План защиты / рассказа о проекте (10–15 минут)

Можешь использовать как шпаргалку.

### 1. Вступление (1–2 минуты)

- Представиться.
- Кратко: *«Тема проекта — веб-портал для промышленной компании ООО „Энерготехмаш“, занимающейся производством и поставкой алюминиевых профильных систем»*.
- Обозначить цели:
  - улучшение UX клиентов (каталог, документация, заявки);
  - цифровизация работы менеджеров (админ-панель, отчёты);
  - выполнение конкретных технических требований по стеку.

### 2. Описание компании и задач (1–2 минуты)

- Что делает компания (алюминиевые профили, фасадные системы и т.п.).
- Какие задачи стояли:
  - удобный доступ к каталогу и документации;
  - быстрый сценарий «Запрос КП»;
  - хранение и аналитика по заявкам;
  - разграничение прав (админ / менеджер / просмотр).

### 3. Архитектура решения (2–3 минуты)

Показать (можно на слайде) общую схему: клиент → API → БД.

- Фронтенд: React, Redux Toolkit, React Router, axios, Tailwind.
- Бэкенд: Node.js + Express:
  - модули: контроллеры, роуты, middleware.
- База данных: PostgreSQL, Prisma ORM, 10 таблиц.
- Авторизация: JWT + Passport, роли пользователей.

### 4. Демонстрация интерфейса (4–5 минут)

Показать живой сайт:

- Главная:
  - современный интерфейс, CTA-кнопки.
- Каталог:
  - поиск по «Артикул или название».
  - карточки товаров.
- Карточка товара:
  - описание и документация.
- Документация:
  - общий список PDF-файлов.
- Запрос КП:
  - заполнение формы, отправка, сообщение об успешной отправке.

Затем:

- Логин:
  - модальное окно «Войти», ввод логина/пароля администратора.
- Админ-панель:
  - карточки метрик;
  - заявки по статусам;
  - топ-продукты.

### 5. Технические детали (2–3 минуты)

Коротко, но чётко:

- **Frontend:**
  - Redux Toolkit: какие слайсы, как устроен поток данных.
  - React Router: схема маршрутов.
  - Tailwind: быстрая разработка UI, единый дизайн.

- **Backend:**
  - Express-маршруты по сущностям (auth, products, enquiries, documents, reports).
  - Prisma: миграции, типобезопасный доступ к БД.
  - `pg`: пример raw-запроса для отчёта (топ-продукты).
  - JWT/Passport: защита роутов и роли.

### 6. Выводы и перспективы (1–2 минуты)

- Что получилось:
  - рабочий фуллстек-портал с B2B-логикой;
  - современный UI для клиентов;
  - базовая CRM-логика для менеджеров.
- Что можно добавить дальше:
  - загрузка файлов документации через админку;
  - расширенные отчёты (по менеджерам, по периодам);
  - отдельный модуль для дилеров/партнёров;
  - интеграция с почтой / Telegram-уведомлениями при новых заявках.

---

## 3. Как твой проект закрывает требования

Из исходного ТЗ:

- **Frontend — React (must have)** ✅  
- Использовать:
  - redux, redux toolkit ✅ (используется Redux Toolkit),
  - react router ✅
- **Backend — Node.js + Express** ✅
- Библиотеки на backend:
  - `pg` ✅ (для отчётов),
  - `jwt` + `passport` при авторизации ✅
- **БД — PostgreSQL, 10 таблиц** ✅ (через Prisma)
- Связь кода с БД через **Prisma** ✅
- Есть:
  - интерфейс пользователя (публичная часть),
  - интерфейс администратора (админ-панель, авторизация),
  - отчёты (dashboard с метриками и топ-продуктами).

